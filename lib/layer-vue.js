!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("LayerVue",[],e):"object"==typeof exports?exports.LayerVue=e():t.LayerVue=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/lib/",e(e.s=1)}([function(t,e,i){"use strict";i.d(e,"a",function(){return d}),i.d(e,"f",function(){return c}),i.d(e,"h",function(){return a}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return r}),i.d(e,"e",function(){return s}),i.d(e,"g",function(){return n});var n="all 0.2s",s="none",o=document,r=o.documentElement,a={up:"onmouseup",move:"onmousemove",d:"onmousedown",add:"addEventListener",qs:"querySelector",on:"onclick",cw:"clientWidth",ch:"clientHeight",gid:"getElementById",ac:"appendChild"},c=parseInt,d={ismax:"layer-vue-ismax",ismin:"layer-vue-ismin",max:".layer-vue-max",min:".layer-vue-min",rz:".layer-vue-resize",lbrz:".layer-vue-lbresize"};e.d={name:"SuiLayer",data:function(){return{defaultvisible:!0,maxbtn:!1,minbtn:!1,minwidth:300,minheight:200,x:0,y:0,width:0,height:0,zIndex:1,transition:"none",overflow:"hidden",id:Math.random()+Math.random(),model:void 0}},props:{title:{type:[String,Boolean],default:"信息"},area:{type:[String,Array],default:"auto"},offset:{type:[String,Array,Number],default:"auto"},settop:{type:Boolean,default:!1},moveOut:{type:Array,default:function(){return[0,0,0,0]}},visible:{},zindex:{type:Number,default:1},closeBtn:{type:[Number,Boolean],default:!0},maxmin:{type:Array,default:function(){return[0,0]}},resize:{type:[Number,Boolean],default:!0},lbresize:{type:[Number,Boolean],default:!0},moveEnd:{type:Function},move:{type:[String,Boolean],default:".layer-vue-title"},cancel:{type:Function},success:{type:Function},end:{type:Function},full:{type:Function},min:{type:Function},restore:{type:Function},destroyOnClose:{type:[Number,Boolean],default:!1},amin:{type:Number,default:0},content:{}},computed:{contentheight:function(){return this.height-(this.title?42:0)}},watch:{visible:function(t){var e=this;if(t){if(this.settop){var i=this.$LayerOptions.settop();this.zIndex=i}else this.zIndex=this.zindex;this.$nextTick(function(){e.init(),e.success&&e.success(e)})}else this.amininit()},defaultvisible:function(t){var e=this;if(t){if(this.settop){var i=this.$LayerOptions.settop();this.zIndex=i}else this.zIndex=this.zindex;this.$nextTick(function(){e.init(),e.success&&e.success(e)})}}},created:function(){if(window[a.add]("resize",this.init),this.visible||void 0===this.visible){if(this.settop){var t=this.$LayerOptions.settop();this.zIndex=t}else this.zIndex=this.zindex;this.success&&this.success(this)}},mounted:function(){var t=this;this.amininit(),this.$nextTick(function(){var e="";if(t.content&&t.content.component){var i=new t.content.component({parent:t.content.parent,propsData:t.content.data});i.vm=i.$mount(),document[a.gid]("layer-vue-"+t.id)[a.qs](".layer-vue-content")[a.ac](i.vm.$el)}t.$refs.content.children.length&&(e=t.$refs.content.children[0].style.display,t.$refs.content.children[0].style.display="none"),(t.visible||void 0===t.visible)&&(t.init(),t.$refs.content.children.length&&(t.$refs.content.children[0].style.display=e))})},beforeDestroy:function(){window.onresize=null},methods:{amininit:function(){if(this.overflow="hidden",0===this.amin){var t=this.areainit(),e=t.height,i=t.width,n=this.offsetinit(this.offset,.5*i,.5*e,!0),s=n.x,o=n.y;this.width=0,this.height=0,this.x=s,this.y=o}},init:function(){this.transition=n;var t=this.areainit(),e=t.height,i=t.width,s=this.offsetinit(this.offset,i,e),o=s.x,r=s.y;this.width=i,this.height=e,this.x=o,this.y=r},areainit:function(){var t=0,e=0;return this.area instanceof Array?(e=this.Transformation(this.area[0],[a.cw]),t=this.area[1]?this.Transformation(this.area[1],[a.ch])+(this.title?42:0):this.$refs.content?this.$refs.content.scrollHeight:42):(e="auto"===this.area?this.$refs.content?this.$refs.content.scrollWidth:0:this.Transformation(this.area,[a.cw]),t=this.$refs.content?this.$refs.content.scrollHeight:42),e>r[a.cw]&&r[a.cw]>this.minwidth?e=r[a.cw]:e<=this.minwidth&&(e=this.minwidth),t>r[a.ch]&&r[a.ch]>this.minheight?t=r[a.ch]:t<=this.minheight&&(t=this.minheight),isNaN(t)&&(t=this.minheight),isNaN(e)&&(e=this.minwidth),{height:t,width:e}},offsetinit:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=0,o=0,d=e,h=i;if(n&&(s=.5*e,o=.5*i,e=0,i=0),t instanceof Array)s=t[1]?this.Transformation(t[1],[a.cw]):.5*(r[a.cw]-e),o=this.Transformation(t[0],[a.ch]);else if("number"==typeof t)o=t,s=.5*(r[a.cw]-e);else if(0===t.substr(-2).indexOf("px"))o=c(t.slice(0,-2));else if(0===t.substr(-1).indexOf("%"))o=r[a.ch]*c(t.slice(0,-1))*.01;else switch(t){case"auto":s=.5*(r[a.cw]-e),o=.5*(r[a.ch]-i);break;case"t":s=.5*(r[a.cw]-e);break;case"r":s=r[a.cw]-d,o=.5*(r[a.ch]-i);break;case"b":s=.5*(r[a.cw]-e),o=r[a.ch]-h;break;case"l":o=.5*(r[a.ch]-i);break;case"lt":break;case"lb":o=r[a.ch]-h;break;case"rt":s=r[a.cw]-d;break;case"rb":s=r[a.cw]-d,o=r[a.ch]-h;break;default:s=.5*(r[a.cw]-e),o=.5*(r[a.ch]-i)}return isNaN(s)&&(s=.5*(r[a.cw]-e)),isNaN(o)&&(o=.5*(r[a.ch]-i)),{x:s,y:o}},Transformation:function(t,e){return"number"==typeof t?t:0===t.substr(-2).indexOf("px")?c(t.slice(0,-2)):0===t.substr(-1).indexOf("%")?r[e]*c(t.slice(0,-1))*.01:c(t)},closeLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"app";this.model?(this.defaultvisible=!1,this.amininit()):(this.$emit("update:visible",!1),this.destroyOnClose?this.end&&this.end():this.cancel&&this.cancel());var e=this.$LayerOptions.instances[this.id];if(e&&(e.Vuecomponent&&e.Vuecomponent.$destroy(),e.instance.ishtml&&o[a.gid]("layer-vue-"+this.id))){o[a.gid]("layer-vue-"+this.id).parentNode.insertBefore(o[a.qs]('[data-id="'+this.id+'"]')[a.qs](".layer-vue-content").children[0],o[a.gid]("layer-vue-"+this.id))}var i=o.body;o[a.gid](t)&&(i=o[a.gid](t)),o[a.gid]("layer-vue-"+this.id)?(i.removeChild(o[a.gid]("layer-vue-"+this.id)),delete this.$LayerOptions.instances[this.id]):console.warn("[layer-warn]:未找到id为：layer-vue-"+this.id+" 的layer窗口")},getthis:function(){return this}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),s=i(6),o=(i.n(s),function(t,e){t.component(n.e.name,n.e),t.directive("drag",{bind:function(t,e){var i={},s=e.value.getthis(),o=function(t){n.b[n.i.up]=function(e){e.preventDefault(),s.transition=n.h,t&&t(),n.b[n.i.move]=null,n.b[n.i.up]=null}};t[n.i.d]=function(){s.settop&&(s.zIndex=s.$LayerOptions.settop())},t[n.i.add]("transitionend",function(t){"width"===t.propertyName&&(s.overflow="auto")}),t[n.i.qs](s.move)&&(t[n.i.qs](s.move).style.cursor="move",t[n.i.qs](s.move)[n.i.d]=function(e){if(!(t.className.indexOf(n.a.ismax)>=0))if(s.transition=n.f,t.className.indexOf(n.a.ismin)>=0){var i=s.x,r=e.clientX;n.b[n.i.move]=function(t){t.preventDefault();var e=t.clientX-r,o=Object(n.g)(i)+Object(n.g)(e);!Object(n.g)(s.moveOut[3])&&o<=0&&(o=0),!Object(n.g)(s.moveOut[1])&&o>=n.c[n.i.cw]-s.minwidth&&(o=n.c[n.i.cw]-s.minwidth),s.x=o},o()}else{var a=s.x,c=s.y,d=e.clientX,h=e.clientY;n.b[n.i.move]=function(t){t.preventDefault();var e=t.clientX-d,i=t.clientY-h,o=Object(n.g)(a)+Object(n.g)(e);!Object(n.g)(s.moveOut[3])&&o<=0&&(o=0),!Object(n.g)(s.moveOut[1])&&o>=n.c[n.i.cw]-s.width&&(o=n.c[n.i.cw]-s.width);var r=Object(n.g)(c)+Object(n.g)(i);!Object(n.g)(s.moveOut[0])&&r<=0&&(r=0),!Object(n.g)(s.moveOut[2])&&r>=n.c[n.i.ch]-s.height&&(r=n.c[n.i.ch]-s.height),s.x=o,s.y=r},o(s.moveEnd)}}),t[n.i.qs](n.a.max)&&(t[n.i.qs](n.a.max)[n.i.on]=function(){s.maxbtn=!s.maxbtn,s.maxbtn?(s.move&&(t[n.i.qs](s.move).style.cursor="not-allowed"),s.minbtn?s.maxbtn=!1:(i.x=s.x,i.y=s.y,i.width=s.width,i.height=s.height),s.x=0,s.y=0,s.width=n.c[n.i.cw],s.height=n.c[n.i.ch],s.full&&s.full()):(s.x=i.x,s.y=i.y,s.width=i.width,s.height=i.height,s.restore&&s.restore(),s.move&&(t[n.i.qs](s.move).style.cursor="move"))}),t[n.i.qs]([n.a.min])&&(t[n.i.qs]([n.a.min])[n.i.on]=function(){s.minbtn=!s.minbtn,s.minbtn?(s.move&&(t[n.i.qs](s.move).style.cursor="move"),s.maxbtn?s.maxbtn=!1:(i.x=s.x,i.y=s.y,i.width=s.width,i.height=s.height),s.x=i.x,s.y=n.c[n.i.ch]-42,s.height=42,s.width=s.minwidth,s.min&&s.min()):(s.x=i.x,s.y=i.y,s.width=i.width,s.height=i.height,s.restore&&s.restore())}),t[n.i.qs]([n.a.rz])[n.i.d]=function(t){t.preventDefault(),s.transition=n.f;var e=s.width,r=s.height,a=s.x,c=s.y,d=s.minwidth,h=s.minheight,u=t.clientX,l=t.clientY;n.b[n.i.move]=function(t){t.preventDefault();var o=t.clientX-u,f=t.clientY-l;i.width=Object(n.g)(e)+Object(n.g)(o),i.height=Object(n.g)(r)+Object(n.g)(f),i.width<=d&&(i.width=d),i.width+a>=n.c[n.i.cw]&&(i.width=n.c[n.i.cw]-a),i.height<=h&&(i.height=h),i.height+c>=n.c[n.i.ch]&&(i.height=n.c[n.i.ch]-c),s.width=i.width,s.height=i.height},o()},t[n.i.qs]([n.a.lbrz])[n.i.d]=function(t){t.preventDefault(),s.transition=n.f;var e=s.minwidth,r=s.minheight,a=s.width,c=s.height,d=s.x,h=t.clientX,u=t.clientY;n.b[n.i.move]=function(t){t.preventDefault();var o=t.clientX-h,l=t.clientY-u;i.width=Object(n.g)(a)-Object(n.g)(o),i.height=Object(n.g)(c)+Object(n.g)(l);var f=Object(n.g)(d)+Object(n.g)(o);i.width<=e&&(i.width=e),i.width+f>=d+a&&(f=d+a-i.width),i.height<=r&&(i.height=r),!Object(n.g)(s.moveOut[3])&&f<=0&&(f=0,i.width=d+a),s.width=i.width,s.height=i.height,s.x=f},o()}}}),t.prototype.$Layer=Object(n.d)(t),t.prototype.$LayerOptions={zindex:e&&e.zindex?e.zindex:100,settop:function(){return t.prototype.$LayerOptions.zindex=t.prototype.$LayerOptions.zindex+1,t.prototype.$LayerOptions.zindex},instances:[]}});e.default={version:"0.0.1",LayerBox:n.d,install:o}},function(t,e,i){"use strict";var n=i(3);i.d(e,"e",function(){return n.d}),i.d(e,"a",function(){return n.a}),i.d(e,"g",function(){return n.f}),i.d(e,"i",function(){return n.h}),i.d(e,"b",function(){return n.b}),i.d(e,"c",function(){return n.c}),i.d(e,"f",function(){return n.e}),i.d(e,"h",function(){return n.g});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.d.install=function(t){t.component(n.d.name,n.d)};var o=function(t){var e=t.extend(n.d),i=function t(e){return t.open(e)};return i.open=function(i){var o=new e;if(o.ishtml=!1,"object"===s(i.content))if(i.content instanceof HTMLElement){if(i.content.parentNode&&i.content.parentNode.className.indexOf("layer-vue")>=0)return i.content.parentNode.parentNode.dataset.id;o.ishtml=!0}else{i.content.component=t.extend(i.content.component);var r=t.prototype.$LayerOptions.instances.findIndex(function(t){if(t)return t.instance.content.component===i.content.component});if(r>=0)return!1===i.destroyOnClose&&(t.prototype.$LayerOptions.instances[r].instance.defaultvisible=!0),r}var a=t.prototype.$LayerOptions.instances.length;i.id=a,i.model=1,i.appid||(i.appid="app");for(var c in i)i.hasOwnProperty(c)&&(o[c]=i[c]);if(o.id=a,o.vm=o.$mount(),o.ishtml){if(i.content.parentNode){i.content.parentNode.insertBefore(o.vm.$el,i.content)}else n.b[n.h.qs]("#"+i.appid)?n.b[n.h.qs]("#"+i.appid).appendChild(o.vm.$el):n.b.body.appendChild(o.vm.$el);o.vm.$el[n.h.qs](".layer-vue-content").appendChild(i.content)}else n.b[n.h.qs]("#"+i.appid)?n.b[n.h.qs]("#"+i.appid).appendChild(o.vm.$el):n.b.body.appendChild(o.vm.$el);return t.prototype.$LayerOptions.instances.push({id:a,instance:o}),a},i.close=function(e){if(void 0!==e){var i=t.prototype.$LayerOptions.instances[e];i&&i.instance.closeLayer()}},i};e.d=o},function(t,e,i){"use strict";var n=i(0);i.d(e,"a",function(){return n.a}),i.d(e,"b",function(){return n.b}),i.d(e,"c",function(){return n.c}),i.d(e,"e",function(){return n.e}),i.d(e,"f",function(){return n.f}),i.d(e,"g",function(){return n.g}),i.d(e,"h",function(){return n.h});var s=i(5),o=i(4),r=o(n.d,s.a,!1,null,null,null);e.d=r.exports},function(t,e){t.exports=function(t,e,i,n,s,o){var r,a=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(r=t,a=t.default);var d="function"==typeof a?a.options:a;e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),i&&(d.functional=!0),s&&(d._scopeId=s);var h;if(o?(h=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=h):n&&(h=n),h){var u=d.functional,l=u?d.render:d.beforeCreate;u?(d._injectStyles=h,d.render=function(t,e){return h.call(e),l(t,e)}):d.beforeCreate=l?[].concat(l,h):[h]}return{esModule:r,exports:a,options:d}}},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.destroyOnClose||(void 0===t.visible?t.defaultvisible:t.visible)?i("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.visible?t.defaultvisible:t.visible,expression:"visible === undefined ? defaultvisible : visible"},{name:"drag",rawName:"v-drag",value:{getthis:t.getthis},expression:"{ getthis }"}],staticClass:"layer-vue",class:{"layer-vue-ismax":t.maxbtn,"layer-vue-ismin":t.minbtn},style:{width:t.width+"px",height:t.height+"px",transform:"translate("+t.x+"px,"+t.y+"px)","z-index":t.zIndex,transition:t.transition},attrs:{"οndragstart":"return false;","data-id":t.id,id:"layer-vue-"+t.id}},[!1!==t.title?i("div",{staticClass:"layer-vue-title",attrs:{title:t.title}},[t._v("\n    "+t._s(t.title)+"\n  ")]):t._e(),t._v(" "),i("div",{staticClass:"layer-vue-tools"},[t.maxmin[1]?i("span",{staticClass:"layer-vue-min"},[t._v("-")]):t._e(),t._v(" "),t.maxmin[0]?i("span",{staticClass:"layer-vue-max"},[t._v("口")]):t._e(),t._v(" "),t.closeBtn?i("span",{staticClass:"layer-vue-close",on:{click:t.closeLayer}},[t._v("X")]):t._e()]),t._v(" "),t.resize?i("div",{staticClass:"layer-vue-resize"}):t._e(),t._v(" "),t.lbresize?i("div",{staticClass:"layer-vue-lbresize"}):t._e(),t._v(" "),i("div",{ref:"content",staticClass:"layer-vue-content",style:{height:t.contentheight+"px",overflow:t.overflow}},[t._t("default")],2)]):t._e()},s=[],o={render:n,staticRenderFns:s};e.a=o},function(t,e){}])});