!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("LayerVue",[],t):"object"==typeof exports?exports.LayerVue=t():e.LayerVue=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/lib/",t(t.s=1)}([function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"g",function(){return l}),n.d(t,"i",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"f",function(){return s}),n.d(t,"h",function(){return o}),n.d(t,"e",function(){return h});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="all 0.2s",s="none",r=document,c=r.documentElement,a={up:"onmouseup",move:"onmousemove",d:"onmousedown",add:"addEventListener",qs:"querySelector",on:"onclick",cw:"clientWidth",ch:"clientHeight",gid:"getElementById",ac:"appendChild"},l=parseInt,d={ismax:"layer-vue-ismax",ismin:"layer-vue-ismin",max:".layer-vue-max",min:".layer-vue-min",rz:".layer-vue-resize",lbrz:".layer-vue-lbresize",p:"prototype",l:"$Layer",c:"content"},h=function e(t,n){for(var o in n)void 0===t[o]?t[o]=n[o]:"object"===i(t[o])&&e(t[o],n[o]);return t};t.d={name:"LayerVue",data:function(){return{defvisible:!0,maxbtn:!1,minbtn:!1,minwidth:300,minheight:200,x:0,y:0,width:0,height:0,zIndex:1,transition:"none",overflow:"hidden",index:Math.random()+Math.random(),model:void 0,display:void 0,defskin:{}}},props:{title:{type:[String,Boolean],default:"信息"},area:{type:[String,Array],default:"auto"},offset:{type:[String,Array,Number],default:"auto"},settop:{type:Boolean,default:!1},moveOut:{type:Array,default:function(){return[0,0,0,0]}},visible:{visible:[Number,Boolean],default:!0},zindex:{type:Number,default:1},closeBtn:{type:[Number,Boolean],default:!0},maxmin:{type:Array,default:function(){return[0,0]}},resize:{type:[Number,Boolean],default:!0},lbresize:{type:[Number,Boolean],default:!0},moveEnd:{type:Function},move:{type:[String,Boolean],default:".layer-vue-title"},cancel:{type:Function},success:{type:Function},end:{type:Function},full:{type:Function},min:{type:Function},restore:{type:Function},destroyOnClose:{type:[Number,Boolean],default:!0},amin:{type:Number,default:0},content:{},titleheight:{type:Number,default:42},skin:{type:Object},id:{default:void 0}},computed:{contentheight:function(){return this.height-(this.title?this.titleheight:0)}},watch:{visible:function(e){this.defvisible=e},defvisible:function(e){var t=this;if(e){if(this.settop){var n=this[d.l].o.settop();this.zIndex=n}else this.zIndex=this.zindex;this.$nextTick(function(){t.init(),t.success&&t.success(t)})}else this.amininit()}},created:function(){if(this.defskin=this[d.l].o.skin,window[a.add]("resize",this.resizefun),this.visible||void 0===this.visible){if(this.settop){var e=this[d.l].o.settop();this.zIndex=e}else this.zIndex=this.zindex;this.success&&this.success(this)}},mounted:function(){var e=this;this.skin&&(this.defskin=h(this.skin,this.defskin)),this.amininit(),this.$nextTick(function(){if(e.content&&e.content.component){var t=new e.content.component({parent:e.content.parent,propsData:e.content.data});t.vm=t.$mount(),e[d.l].o.instances[e.index].Vuecomponent=t,document[a.gid]("layer-vue-"+e.index)[a.qs](".layer-vue-content")[a.ac](t.vm.$el)}if(e.$refs.content.children.length&&(e.display=e.$refs.content.children[0].style.display),e.visible||void 0===e.visible){if(e.settop){var n=e[d.l].o.settop();e.zIndex=n}else e.zIndex=e.zindex;e.init()}})},beforeDestroy:function(){window.removeEventListener("resize",this.resizefun)},methods:{resizefun:function(){if(!this.minbtn)return this.maxbtn?void(this.width=c[a.cw]):void this.init()},amininit:function(){if(this.overflow="hidden",0===this.amin){var e=this.areainit(),t=e.height,n=e.width,i=this.offsetinit(this.offset,.5*n,.5*t,!0),o=i.x,s=i.y;this.width=0,this.height=0,this.x=o,this.y=s}},init:function(){this.maxbtn=!1,this.minbtn=!1,this.$refs.content.children.length&&("none"!==this.display&&"none"!==getComputedStyle(this.$refs.content.children[0]).display||(this.$refs.content.children[0].style.display="block")),this.transition=o;var e=this.areainit(),t=e.height,n=e.width,i=this.offsetinit(this.offset,n,t),s=i.x,r=i.y;this.width=n,this.height=t,this.x=s,this.y=r},areainit:function(){var e=0,t=0;return this.area instanceof Array?(t=this.tf(this.area[0],[a.cw]),e=this.area[1]?this.tf(this.area[1],[a.ch])+(this.title?this.titleheight:0):this.$refs.content?this.$refs.content.scrollHeight:0+this.titleheight):(t="auto"===this.area?this.$refs.content?this.$refs.content.scrollWidth:0:this.tf(this.area,[a.cw]),e=this.$refs.content?this.$refs.content.scrollHeight:0+this.titleheight),t>c[a.cw]&&c[a.cw]>this.minwidth?t=c[a.cw]:t<=this.minwidth&&(t=this.minwidth),e>c[a.ch]&&c[a.ch]>this.minheight?e=c[a.ch]:e<=this.minheight&&(e=this.minheight),isNaN(e)&&(e=this.minheight),isNaN(t)&&(t=this.minwidth),{height:e,width:t}},offsetinit:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=0,s=0,r=t,d=n;if(i&&(o=.5*t,s=.5*n,t=0,n=0),e instanceof Array)o=e[1]?this.tf(e[1],[a.cw]):.5*(c[a.cw]-t),s=this.tf(e[0],[a.ch]);else if("number"==typeof e)s=e,o=.5*(c[a.cw]-t);else if(0===e.substr(-2).indexOf("px"))s=l(e.slice(0,-2));else if(0===e.substr(-1).indexOf("%"))s=c[a.ch]*l(e.slice(0,-1))*.01;else switch(e){case"auto":o=.5*(c[a.cw]-t),s=.5*(c[a.ch]-n);break;case"t":o=.5*(c[a.cw]-t);break;case"r":o=c[a.cw]-r,s=.5*(c[a.ch]-n);break;case"b":o=.5*(c[a.cw]-t),s=c[a.ch]-d;break;case"l":s=.5*(c[a.ch]-n);break;case"lt":break;case"lb":s=c[a.ch]-d;break;case"rt":o=c[a.cw]-r;break;case"rb":o=c[a.cw]-r,s=c[a.ch]-d;break;default:o=.5*(c[a.cw]-t),s=.5*(c[a.ch]-n)}return isNaN(o)&&(o=.5*(c[a.cw]-t)),isNaN(s)&&(s=.5*(c[a.ch]-n)),{x:o,y:s}},tf:function(e,t){return"number"==typeof e?e:0===e.substr(-2).indexOf("px")?l(e.slice(0,-2)):0===e.substr(-1).indexOf("%")?c[t]*l(e.slice(0,-1))*.01:l(e)},closeLayer:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"app";if(this.defvisible=!1,this.model||this.visible&&this.$emit("update:visible",!1),this.cancel&&this.cancel(),this.destroyOnClose){var i=r[a.gid]("layer-vue-"+this.index),o=function(){return console.log("[layer-warn]:No layer with id ：layer-vue-"+t.index+"found")};if(this.model){var s=this[d.l].o.instances[this.index];if(s)if(s.instance.ishtml){if(!i)return void o();var c=i[a.qs](".layer-vue-content");if(!s.instance.isnewDOM){if(i.parentNode){var l=i.parentNode;c.children[0].style.display=this.display,l.insertBefore(c.children[0],i),l.removeChild(i),this.$destroy(),delete this[d.l].o.instances[this.index],this.end&&this.end()}else o();return}c.removeChild(c.children[0])}else s.Vuecomponent&&s.Vuecomponent.$destroy();var h=r.body;if(r[a.gid](n)&&(h=r[a.gid](n)),!i)return void o();h.removeChild(i),this.$destroy(),delete this[d.l].o.instances[this.index]}this.end&&this.end()}},getthis:function(){return this}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(6),s=(n.n(o),{shadowColor:"rgb(0 0 0 / 30%)",title:{backgroundColor:"#fff",color:"#000",borderColor:"#f0f0f0"},content:{backgroundColor:"#fff",color:"#000"},maxmin:{backgroundColor:"#fff",color:"#000",backgroundColorHover:"#6666",colorHover:"#008afc"},close:{backgroundColor:"#fff",color:"#000",backgroundColorHover:"#f00",colorHover:"#fff"}}),r=function(e,t){console.log("%c layer-vue %c v"+i.k+" %c","background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#41b883 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent"),e.component(i.a.name,i.a),e.directive("drag",{bind:function(e,t){var n={},o=t.value.getthis(),s=function(e){i.c[i.j.up]=function(t){t.preventDefault(),o.transition=i.i,e&&e(),i.c[i.j.move]=null,i.c[i.j.up]=null}};e[i.j.d]=function(){o.settop&&(o.zIndex=o[i.b.l].o.settop())},e[i.j.add]("transitionend",function(e){"width"===e.propertyName&&(o.overflow="auto")}),e[i.j.qs](o.move)&&(e[i.j.qs](o.move).style.cursor="move",e[i.j.qs](o.move)[i.j.d]=function(t){if(!(e.className.indexOf(i.b.ismax)>=0))if(o.transition=i.g,e.className.indexOf(i.b.ismin)>=0){var n=o.x,r=t.clientX;i.c[i.j.move]=function(e){e.preventDefault();var t=e.clientX-r,s=Object(i.h)(n)+Object(i.h)(t);!Object(i.h)(o.moveOut[3])&&s<=0&&(s=0),!Object(i.h)(o.moveOut[1])&&s>=i.d[i.j.cw]-o.minwidth&&(s=i.d[i.j.cw]-o.minwidth),o.x=s},s()}else{var c=o.x,a=o.y,l=t.clientX,d=t.clientY;i.c[i.j.move]=function(e){e.preventDefault();var t=e.clientX-l,n=e.clientY-d,s=Object(i.h)(c)+Object(i.h)(t);!Object(i.h)(o.moveOut[3])&&s<=0&&(s=0),!Object(i.h)(o.moveOut[1])&&s>=i.d[i.j.cw]-o.width&&(s=i.d[i.j.cw]-o.width);var r=Object(i.h)(a)+Object(i.h)(n);!Object(i.h)(o.moveOut[0])&&r<=0&&(r=0),!Object(i.h)(o.moveOut[2])&&r>=i.d[i.j.ch]-o.height&&(r=i.d[i.j.ch]-o.height),o.x=s,o.y=r},s(o.moveEnd)}}),e[i.j.qs](i.b.max)&&(e[i.j.qs](i.b.max)[i.j.on]=function(){o.maxbtn=!o.maxbtn,o.maxbtn?(o.move&&(e[i.j.qs](o.move).style.cursor="not-allowed"),o.minbtn?o.minbtn=!1:(n.x=o.x,n.y=o.y,n.width=o.width,n.height=o.height),o.x=0,o.y=0,o.width=i.d[i.j.cw],o.height=i.d[i.j.ch],o.full&&o.full()):(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height,o.restore&&o.restore(),o.move&&(e[i.j.qs](o.move).style.cursor="move"))}),e[i.j.qs]([i.b.min])&&(e[i.j.qs]([i.b.min])[i.j.on]=function(){o.minbtn=!o.minbtn,o.minbtn?(o.move&&(e[i.j.qs](o.move).style.cursor="move"),o.maxbtn?o.maxbtn=!1:(n.x=o.x,n.y=o.y,n.width=o.width,n.height=o.height),o.x=n.x,o.y=i.d[i.j.ch]-o.titleheight,o.height=o.titleheight,o.width=200,o.min&&o.min()):(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height,o.restore&&o.restore())}),e[i.j.qs]([i.b.rz])[i.j.d]=function(e){e.preventDefault(),o.transition=i.g;var t=o.width,r=o.height,c=o.x,a=o.y,l=o.minwidth,d=o.minheight,h=e.clientX,u=e.clientY;i.c[i.j.move]=function(e){e.preventDefault();var s=e.clientX-h,f=e.clientY-u;n.width=Object(i.h)(t)+Object(i.h)(s),n.height=Object(i.h)(r)+Object(i.h)(f),n.width<=l&&(n.width=l),n.width+c>=i.d[i.j.cw]&&(n.width=i.d[i.j.cw]-c),n.height<=d&&(n.height=d),n.height+a>=i.d[i.j.ch]&&(n.height=i.d[i.j.ch]-a),o.width=n.width,o.height=n.height},s()},e[i.j.qs]([i.b.lbrz])[i.j.d]=function(e){e.preventDefault(),o.transition=i.g;var t=o.minwidth,r=o.minheight,c=o.width,a=o.height,l=o.x,d=e.clientX,h=e.clientY;i.c[i.j.move]=function(e){e.preventDefault();var s=e.clientX-d,u=e.clientY-h;n.width=Object(i.h)(c)-Object(i.h)(s),n.height=Object(i.h)(a)+Object(i.h)(u);var f=Object(i.h)(l)+Object(i.h)(s);n.width<=t&&(n.width=t),n.width+f>=l+c&&(f=l+c-n.width),n.height<=r&&(n.height=r),!Object(i.h)(o.moveOut[3])&&f<=0&&(f=0,n.width=l+c),o.width=n.width,o.height=n.height,o.x=f},s()}}}),e[i.b.p][i.b.l]=Object(i.e)(e),e[i.b.p][i.b.l].o={zindex:t&&t.zindex?t.zindex:100,skin:t&&t.skin?Object(i.f)(t.skin,s):s,settop:function(){return e[i.b.p][i.b.l].o.zindex=e[i.b.p][i.b.l].o.zindex+1,e[i.b.p][i.b.l].o.zindex},instances:[]}};t.default={version:i.k,LayerBox:i.e,install:r}},function(e,t,n){"use strict";n.d(t,"k",function(){return s});var i=n(3);n.d(t,"a",function(){return i.d}),n.d(t,"b",function(){return i.a}),n.d(t,"h",function(){return i.g}),n.d(t,"j",function(){return i.i}),n.d(t,"c",function(){return i.b}),n.d(t,"d",function(){return i.c}),n.d(t,"g",function(){return i.f}),n.d(t,"i",function(){return i.h}),n.d(t,"f",function(){return i.e});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.d.install=function(e){e.component(i.d.name,i.d)};var s="0.1.1",r=function(e){var t=e.extend(i.d),n=function e(t){return e.open(t)};return n.open=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.id){var s=e[i.a.p][i.a.l].o.instances.findIndex(function(e){if(e)return e.instance.id===n.id});if(s>=0)return n.destroyOnClose||(e[i.a.p][i.a.l].o.instances[s].instance.defvisible=!0),s}else n.destroyOnClose=!0;var r=new t;delete n.visible;var c=e[i.a.p][i.a.l].o.skin;if(n.skin?n.skin=Object(i.e)(n.skin,c):n.skin=c,"object"===o(n.content))if(n.content instanceof HTMLElement){if(n.content.parentNode){if(n.content.parentNode.className.indexOf("layer-vue")>=0)return n.content.parentNode.parentNode.dataset.index}else r.isnewDOM=!0;r.ishtml=!0}else n.content.component?n.content.component=e.extend(n.content.component):console.log("[layer warn]:Incorrect content type");var a=e[i.a.p][i.a.l].o.instances.length;void 0===n.index?n.index=a:a=n.index,n.model=1,n.appid||(n.appid="app");for(var l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);if(r.index=a,r.vm=r.$mount(),r.ishtml){if(n.content.parentNode){n.content.parentNode.insertBefore(r.vm.$el,n.content)}else i.b[i.i.qs]("#"+n.appid)?i.b[i.i.qs]("#"+n.appid).appendChild(r.vm.$el):i.b.body.appendChild(r.vm.$el);r.vm.$el[i.i.qs](".layer-vue-content").appendChild(n.content)}else{switch(o(n.content)){case"function":case"number":case"string":case"boolean":r.vm.$el[i.i.qs](".layer-vue-content").innerHTML=n.content;break;case"object":break;case"array":default:console.log("[layer warn]:Incorrect content type")}i.b[i.i.qs]("#"+n.appid)?i.b[i.i.qs]("#"+n.appid).appendChild(r.vm.$el):i.b.body.appendChild(r.vm.$el)}return e[i.a.p][i.a.l].o.instances.push({index:a,instance:r}),a},n.close=function(t){if(void 0===t)return void console.log("[layer-warn]:The index is undefined");var n=e[i.a.p][i.a.l].o.instances[t];n?n.instance.closeLayer():console.log("[layer-warn]:No layer with index ：layer-vue-"+t+" found")},n.restore=function(t){if(void 0===t)return void console.log("[layer-warn]:The index is undefined");var n=e[i.a.p][i.a.l].o.instances[t];n?n.instance.init():console.log("[layer-warn]:No layer with index ：layer-vue-"+t+" found")},n.version=s,n};t.e=r},function(e,t,n){"use strict";var i=n(0);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c}),n.d(t,"e",function(){return i.e}),n.d(t,"f",function(){return i.f}),n.d(t,"g",function(){return i.g}),n.d(t,"h",function(){return i.h}),n.d(t,"i",function(){return i.i});var o=n(5),s=n(4),r=s(i.d,o.a,!1,null,null,null);t.d=r.exports},function(e,t){e.exports=function(e,t,n,i,o,s){var r,c=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(r=e,c=e.default);var l="function"==typeof c?c.options:c;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId=o);var d;if(s?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=d):i&&(d=i),d){var h=l.functional,u=h?l.render:l.beforeCreate;h?(l._injectStyles=d,l.render=function(e,t){return d.call(t),u(e,t)}):l.beforeCreate=u?[].concat(u,d):[d]}return{esModule:r,exports:c,options:l}}},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.destroyOnClose||e.defvisible?n("div",{directives:[{name:"show",rawName:"v-show",value:!!e.destroyOnClose||e.defvisible,expression:"destroyOnClose ? true : defvisible"},{name:"drag",rawName:"v-drag",value:{getthis:e.getthis},expression:"{ getthis }"}],staticClass:"layer-vue",class:{"layer-vue-ismax":e.maxbtn,"layer-vue-ismin":e.minbtn},style:{"--mch":this.defskin.maxmin.colorHover,"--cch":this.defskin.close.colorHover,"--mbch":this.defskin.maxmin.backgroundColorHover,"--cbch":this.defskin.close.backgroundColorHover,"background-color":this.defskin.title.backgroundColor,"box-shadow":"1px 1px 50px "+this.defskin.shadowColor,width:e.width+"px",height:e.height+"px",transform:"translate("+e.x+"px,"+e.y+"px)","z-index":e.zIndex,transition:e.transition},attrs:{"οndragstart":"return false;","data-index":e.index,"data-id":e.id,id:"layer-vue-"+e.index}},[!1!==e.title?n("div",{staticClass:"layer-vue-title",style:{"background-color":this.defskin.title.backgroundColor,color:this.defskin.title.color,"border-bottom":"1px solid "+this.defskin.title.borderColor,height:e.titleheight+"px","line-height":e.titleheight+"px"},attrs:{title:e.title}},[e._v("\n    "+e._s(e.title)+"\n  ")]):e._e(),e._v(" "),n("div",{staticClass:"layer-vue-tools",style:{height:e.titleheight+"px","line-height":e.titleheight+"px"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.maxmin[1],expression:"maxmin[1]"}],staticClass:"layer-vue-min"},[n("i",{staticClass:"iconfont",class:{"icon-min":!e.minbtn,"icon-restore":e.minbtn}})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.maxmin[0]&&!e.minbtn,expression:"maxmin[0] && !minbtn"}],staticClass:"layer-vue-max"},[n("i",{staticClass:"iconfont",class:{"icon-max":!e.maxbtn,"icon-restore":e.maxbtn}})]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.closeBtn,expression:"closeBtn"}],staticClass:"layer-vue-close",on:{click:e.closeLayer}},[n("i",{staticClass:"iconfont icon-close"})])]),e._v(" "),e.resize?n("div",{staticClass:"layer-vue-resize"}):e._e(),e._v(" "),e.lbresize?n("div",{staticClass:"layer-vue-lbresize"}):e._e(),e._v(" "),n("div",{ref:"content",staticClass:"layer-vue-content",style:{"background-color":this.defskin.content.backgroundColor,color:this.defskin.content.color,height:e.contentheight+"px",overflow:e.overflow}},[e._t("default",[e._v(e._s(e.model?null:e.content))])],2)]):e._e()},o=[],s={render:i,staticRenderFns:o};t.a=s},function(e,t){}])});