!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("LayerVue",[],t):"object"==typeof exports?exports.LayerVue=t():e.LayerVue=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/lib/",t(t.s=1)}([function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"f",function(){return c}),n.d(t,"h",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"g",function(){return i});var i="all 0.2s",o="none",s=document,r=s.documentElement,a={up:"onmouseup",move:"onmousemove",d:"onmousedown",add:"addEventListener",qs:"querySelector",on:"onclick",cw:"clientWidth",ch:"clientHeight",gid:"getElementById",ac:"appendChild"},c=parseInt,d={ismax:"layer-vue-ismax",ismin:"layer-vue-ismin",max:".layer-vue-max",min:".layer-vue-min",rz:".layer-vue-resize",lbrz:".layer-vue-lbresize"};t.d={name:"LayerVue",data:function(){return{defaultvisible:!0,maxbtn:!1,minbtn:!1,minwidth:300,minheight:200,x:0,y:0,width:0,height:0,zIndex:1,transition:"none",overflow:"hidden",id:Math.random()+Math.random(),model:void 0,display:void 0}},props:{title:{type:[String,Boolean],default:"信息"},area:{type:[String,Array],default:"auto"},offset:{type:[String,Array,Number],default:"auto"},settop:{type:Boolean,default:!1},moveOut:{type:Array,default:function(){return[0,0,0,0]}},visible:{visible:[Number,Boolean],default:!0},zindex:{type:Number,default:1},closeBtn:{type:[Number,Boolean],default:!0},maxmin:{type:Array,default:function(){return[0,0]}},resize:{type:[Number,Boolean],default:!0},lbresize:{type:[Number,Boolean],default:!0},moveEnd:{type:Function},move:{type:[String,Boolean],default:".layer-vue-title"},cancel:{type:Function},success:{type:Function},end:{type:Function},full:{type:Function},min:{type:Function},restore:{type:Function},destroyOnClose:{type:[Number,Boolean],default:!1},amin:{type:Number,default:0},content:{}},computed:{contentheight:function(){return this.height-(this.title?42:0)}},watch:{visible:function(e){this.defaultvisible=e},defaultvisible:function(e){var t=this;if(e){if(this.settop){var n=this.$LayerOptions.settop();this.zIndex=n}else this.zIndex=this.zindex;this.$nextTick(function(){t.init(),t.success&&t.success(t)})}else this.amininit()}},created:function(){if(window[a.add]("resize",this.init),this.visible||void 0===this.visible){if(this.settop){var e=this.$LayerOptions.settop();this.zIndex=e}else this.zIndex=this.zindex;this.success&&this.success(this)}},mounted:function(){var e=this;this.amininit(),this.$nextTick(function(){if(e.content&&e.content.component){var t=new e.content.component({parent:e.content.parent,propsData:e.content.data});t.vm=t.$mount(),e.$LayerOptions.instances[e.id].Vuecomponent=t,document[a.gid]("layer-vue-"+e.id)[a.qs](".layer-vue-content")[a.ac](t.vm.$el)}if(e.$refs.content.children.length&&(e.display=e.$refs.content.children[0].style.display),e.visible||void 0===e.visible){if(e.settop){var n=e.$LayerOptions.settop();e.zIndex=n}else e.zIndex=e.zindex;e.init()}})},beforeDestroy:function(){window.onresize=null},methods:{amininit:function(){if(this.overflow="hidden",0===this.amin){var e=this.areainit(),t=e.height,n=e.width,i=this.offsetinit(this.offset,.5*n,.5*t,!0),o=i.x,s=i.y;this.width=0,this.height=0,this.x=o,this.y=s}},init:function(){this.$refs.content.children.length&&("none"!==this.display&&"none"!==getComputedStyle(this.$refs.content.children[0]).display||(this.$refs.content.children[0].style.display="block")),this.transition=i;var e=this.areainit(),t=e.height,n=e.width,o=this.offsetinit(this.offset,n,t),s=o.x,r=o.y;this.width=n,this.height=t,this.x=s,this.y=r},areainit:function(){var e=0,t=0;return this.area instanceof Array?(t=this.tf(this.area[0],[a.cw]),e=this.area[1]?this.tf(this.area[1],[a.ch])+(this.title?42:0):this.$refs.content?this.$refs.content.scrollHeight:42):(t="auto"===this.area?this.$refs.content?this.$refs.content.scrollWidth:0:this.tf(this.area,[a.cw]),e=this.$refs.content?this.$refs.content.scrollHeight:42),t>r[a.cw]&&r[a.cw]>this.minwidth?t=r[a.cw]:t<=this.minwidth&&(t=this.minwidth),e>r[a.ch]&&r[a.ch]>this.minheight?e=r[a.ch]:e<=this.minheight&&(e=this.minheight),isNaN(e)&&(e=this.minheight),isNaN(t)&&(t=this.minwidth),{height:e,width:t}},offsetinit:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=0,s=0,d=t,l=n;if(i&&(o=.5*t,s=.5*n,t=0,n=0),e instanceof Array)o=e[1]?this.tf(e[1],[a.cw]):.5*(r[a.cw]-t),s=this.tf(e[0],[a.ch]);else if("number"==typeof e)s=e,o=.5*(r[a.cw]-t);else if(0===e.substr(-2).indexOf("px"))s=c(e.slice(0,-2));else if(0===e.substr(-1).indexOf("%"))s=r[a.ch]*c(e.slice(0,-1))*.01;else switch(e){case"auto":o=.5*(r[a.cw]-t),s=.5*(r[a.ch]-n);break;case"t":o=.5*(r[a.cw]-t);break;case"r":o=r[a.cw]-d,s=.5*(r[a.ch]-n);break;case"b":o=.5*(r[a.cw]-t),s=r[a.ch]-l;break;case"l":s=.5*(r[a.ch]-n);break;case"lt":break;case"lb":s=r[a.ch]-l;break;case"rt":o=r[a.cw]-d;break;case"rb":o=r[a.cw]-d,s=r[a.ch]-l;break;default:o=.5*(r[a.cw]-t),s=.5*(r[a.ch]-n)}return isNaN(o)&&(o=.5*(r[a.cw]-t)),isNaN(s)&&(s=.5*(r[a.ch]-n)),{x:o,y:s}},tf:function(e,t){return"number"==typeof e?e:0===e.substr(-2).indexOf("px")?c(e.slice(0,-2)):0===e.substr(-1).indexOf("%")?r[t]*c(e.slice(0,-1))*.01:c(e)},closeLayer:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"app",i=s[a.gid]("layer-vue-"+this.id),o=function(){return console.log("[layer-warn]:No layer with id ：layer-vue-"+t.id+"found")};if(this.model){this.defaultvisible=!1;var r=this.$LayerOptions.instances[this.id];if(r)if(r.instance.ishtml){if(!i)return void o();var c=i[a.qs](".layer-vue-content");if(!r.instance.isnewDOM){if(i.parentNode){var d=i.parentNode;c.children[0].style.display=this.display,d.insertBefore(c.children[0],i),d.removeChild(i),delete this.$LayerOptions.instances[this.id],this.end&&this.end()}else o();return}c.removeChild(c.children[0])}else if(r.Vuecomponent){if(!this.destroyOnClose)return this.defaultvisible=!1,void(this.cancel&&this.cancel());r.Vuecomponent.$destroy()}var l=s.body;s[a.gid](n)&&(l=s[a.gid](n)),i?(l.removeChild(i),delete this.$LayerOptions.instances[this.id],this.end&&this.end()):o()}else this.defaultvisible=!1,this.visible&&this.$emit("update:visible",!1),this.destroyOnClose?this.end&&this.end():this.cancel&&this.cancel()},getthis:function(){return this}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(6),s=(n.n(o),function(e,t){e.component(i.e.name,i.e),e.directive("drag",{bind:function(e,t){var n={},o=t.value.getthis(),s=function(e){i.b[i.i.up]=function(t){t.preventDefault(),o.transition=i.h,e&&e(),i.b[i.i.move]=null,i.b[i.i.up]=null}};e[i.i.d]=function(){o.settop&&(o.zIndex=o.$LayerOptions.settop())},e[i.i.add]("transitionend",function(e){"width"===e.propertyName&&(o.overflow="auto")}),e[i.i.qs](o.move)&&(e[i.i.qs](o.move).style.cursor="move",e[i.i.qs](o.move)[i.i.d]=function(t){if(!(e.className.indexOf(i.a.ismax)>=0))if(o.transition=i.f,e.className.indexOf(i.a.ismin)>=0){var n=o.x,r=t.clientX;i.b[i.i.move]=function(e){e.preventDefault();var t=e.clientX-r,s=Object(i.g)(n)+Object(i.g)(t);!Object(i.g)(o.moveOut[3])&&s<=0&&(s=0),!Object(i.g)(o.moveOut[1])&&s>=i.c[i.i.cw]-o.minwidth&&(s=i.c[i.i.cw]-o.minwidth),o.x=s},s()}else{var a=o.x,c=o.y,d=t.clientX,l=t.clientY;i.b[i.i.move]=function(e){e.preventDefault();var t=e.clientX-d,n=e.clientY-l,s=Object(i.g)(a)+Object(i.g)(t);!Object(i.g)(o.moveOut[3])&&s<=0&&(s=0),!Object(i.g)(o.moveOut[1])&&s>=i.c[i.i.cw]-o.width&&(s=i.c[i.i.cw]-o.width);var r=Object(i.g)(c)+Object(i.g)(n);!Object(i.g)(o.moveOut[0])&&r<=0&&(r=0),!Object(i.g)(o.moveOut[2])&&r>=i.c[i.i.ch]-o.height&&(r=i.c[i.i.ch]-o.height),o.x=s,o.y=r},s(o.moveEnd)}}),e[i.i.qs](i.a.max)&&(e[i.i.qs](i.a.max)[i.i.on]=function(){o.maxbtn=!o.maxbtn,o.maxbtn?(o.move&&(e[i.i.qs](o.move).style.cursor="not-allowed"),o.minbtn?o.maxbtn=!1:(n.x=o.x,n.y=o.y,n.width=o.width,n.height=o.height),o.x=0,o.y=0,o.width=i.c[i.i.cw],o.height=i.c[i.i.ch],o.full&&o.full()):(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height,o.restore&&o.restore(),o.move&&(e[i.i.qs](o.move).style.cursor="move"))}),e[i.i.qs]([i.a.min])&&(e[i.i.qs]([i.a.min])[i.i.on]=function(){o.minbtn=!o.minbtn,o.minbtn?(o.move&&(e[i.i.qs](o.move).style.cursor="move"),o.maxbtn?o.maxbtn=!1:(n.x=o.x,n.y=o.y,n.width=o.width,n.height=o.height),o.x=n.x,o.y=i.c[i.i.ch]-42,o.height=42,o.width=o.minwidth,o.min&&o.min()):(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height,o.restore&&o.restore())}),e[i.i.qs]([i.a.rz])[i.i.d]=function(e){e.preventDefault(),o.transition=i.f;var t=o.width,r=o.height,a=o.x,c=o.y,d=o.minwidth,l=o.minheight,h=e.clientX,u=e.clientY;i.b[i.i.move]=function(e){e.preventDefault();var s=e.clientX-h,f=e.clientY-u;n.width=Object(i.g)(t)+Object(i.g)(s),n.height=Object(i.g)(r)+Object(i.g)(f),n.width<=d&&(n.width=d),n.width+a>=i.c[i.i.cw]&&(n.width=i.c[i.i.cw]-a),n.height<=l&&(n.height=l),n.height+c>=i.c[i.i.ch]&&(n.height=i.c[i.i.ch]-c),o.width=n.width,o.height=n.height},s()},e[i.i.qs]([i.a.lbrz])[i.i.d]=function(e){e.preventDefault(),o.transition=i.f;var t=o.minwidth,r=o.minheight,a=o.width,c=o.height,d=o.x,l=e.clientX,h=e.clientY;i.b[i.i.move]=function(e){e.preventDefault();var s=e.clientX-l,u=e.clientY-h;n.width=Object(i.g)(a)-Object(i.g)(s),n.height=Object(i.g)(c)+Object(i.g)(u);var f=Object(i.g)(d)+Object(i.g)(s);n.width<=t&&(n.width=t),n.width+f>=d+a&&(f=d+a-n.width),n.height<=r&&(n.height=r),!Object(i.g)(o.moveOut[3])&&f<=0&&(f=0,n.width=d+a),o.width=n.width,o.height=n.height,o.x=f},s()}}}),e.prototype.$Layer=Object(i.d)(e),e.prototype.$LayerOptions={zindex:t&&t.zindex?t.zindex:100,settop:function(){return e.prototype.$LayerOptions.zindex=e.prototype.$LayerOptions.zindex+1,e.prototype.$LayerOptions.zindex},instances:[]}});t.default={version:"0.0.1",LayerBox:i.d,install:s}},function(e,t,n){"use strict";var i=n(3);n.d(t,"e",function(){return i.d}),n.d(t,"a",function(){return i.a}),n.d(t,"g",function(){return i.f}),n.d(t,"i",function(){return i.h}),n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c}),n.d(t,"f",function(){return i.e}),n.d(t,"h",function(){return i.g});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.d.install=function(e){e.component(i.d.name,i.d)};var s=function(e){var t=e.extend(i.d),n=function e(t){return e.open(t)};return n.open=function(n){var s=new t;if(s.ishtml=!1,"object"===o(n.content))if(n.content instanceof HTMLElement){if(n.content.parentNode){if(n.content.parentNode.className.indexOf("layer-vue")>=0)return console.log(n.content.parentNode),n.content.parentNode.parentNode.dataset.id}else s.isnewDOM=!0;s.ishtml=!0}else{n.content.component=e.extend(n.content.component);var r=e.prototype.$LayerOptions.instances.findIndex(function(e){if(e)return e.instance.content.component===n.content.component});if(r>=0)return!1===n.destroyOnClose&&(e.prototype.$LayerOptions.instances[r].instance.defaultvisible=!0),r}var a=e.prototype.$LayerOptions.instances.length;n.id=a,n.model=1,n.appid||(n.appid="app");for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c]);if(s.id=a,s.vm=s.$mount(),s.ishtml){if(n.content.parentNode){n.content.parentNode.insertBefore(s.vm.$el,n.content)}else i.b[i.h.qs]("#"+n.appid)?i.b[i.h.qs]("#"+n.appid).appendChild(s.vm.$el):i.b.body.appendChild(s.vm.$el);s.vm.$el[i.h.qs](".layer-vue-content").appendChild(n.content)}else{switch("object"===o(n.content)||"boolean"==typeof n.content&&(s.vm.$el[i.h.qs](".layer-vue-content").innerHTML=n.content),o(n.content)){case"function":case"number":case"string":case"boolean":s.vm.$el[i.h.qs](".layer-vue-content").innerHTML=n.content;break;case"object":break;default:console.log("[layer warn]:Incorrect content type")}i.b[i.h.qs]("#"+n.appid)?i.b[i.h.qs]("#"+n.appid).appendChild(s.vm.$el):i.b.body.appendChild(s.vm.$el)}return e.prototype.$LayerOptions.instances.push({id:a,instance:s}),a},n.close=function(t){if(void 0===t)return void console.log("[layer-warn]:The id is undefined");var n=e.prototype.$LayerOptions.instances[t];n?n.instance.closeLayer():console.log("[layer-warn]:No layer with id ：layer-vue-"+t+"found")},n};t.d=s},function(e,t,n){"use strict";var i=n(0);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c}),n.d(t,"e",function(){return i.e}),n.d(t,"f",function(){return i.f}),n.d(t,"g",function(){return i.g}),n.d(t,"h",function(){return i.h});var o=n(5),s=n(4),r=s(i.d,o.a,!1,null,null,null);t.d=r.exports},function(e,t){e.exports=function(e,t,n,i,o,s){var r,a=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(r=e,a=e.default);var d="function"==typeof a?a.options:a;t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0),n&&(d.functional=!0),o&&(d._scopeId=o);var l;if(s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=l):i&&(l=i),l){var h=d.functional,u=h?d.render:d.beforeCreate;h?(d._injectStyles=l,d.render=function(e,t){return l.call(t),u(e,t)}):d.beforeCreate=u?[].concat(u,l):[l]}return{esModule:r,exports:a,options:d}}},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.destroyOnClose||e.defaultvisible?n("div",{directives:[{name:"show",rawName:"v-show",value:!!e.destroyOnClose||e.defaultvisible,expression:"destroyOnClose ? true : defaultvisible"},{name:"drag",rawName:"v-drag",value:{getthis:e.getthis},expression:"{ getthis }"}],staticClass:"layer-vue",class:{"layer-vue-ismax":e.maxbtn,"layer-vue-ismin":e.minbtn},style:{width:e.width+"px",height:e.height+"px",transform:"translate("+e.x+"px,"+e.y+"px)","z-index":e.zIndex,transition:e.transition},attrs:{"οndragstart":"return false;","data-id":e.id,id:"layer-vue-"+e.id}},[!1!==e.title?n("div",{staticClass:"layer-vue-title",attrs:{title:e.title}},[e._v("\n    "+e._s(e.title)+"\n  ")]):e._e(),e._v(" "),n("div",{staticClass:"layer-vue-tools"},[e.maxmin[1]?n("span",{staticClass:"layer-vue-min"},[e._v("-")]):e._e(),e._v(" "),e.maxmin[0]?n("span",{staticClass:"layer-vue-max"},[e._v("口")]):e._e(),e._v(" "),e.closeBtn?n("span",{staticClass:"layer-vue-close",on:{click:e.closeLayer}},[e._v("X")]):e._e()]),e._v(" "),e.resize?n("div",{staticClass:"layer-vue-resize"}):e._e(),e._v(" "),e.lbresize?n("div",{staticClass:"layer-vue-lbresize"}):e._e(),e._v(" "),n("div",{ref:"content",staticClass:"layer-vue-content",style:{height:e.contentheight+"px",overflow:e.overflow}},[e._t("default")],2)]):e._e()},o=[],s={render:i,staticRenderFns:o};t.a=s},function(e,t){}])});