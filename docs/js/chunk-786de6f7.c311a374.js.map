{"version":3,"sources":["webpack:///./src/views/doc/Doc.vue?969e","webpack:///src/views/doc/Doc.vue","webpack:///./src/views/doc/Doc.vue?4d4b","webpack:///./src/views/doc/Doc.vue","webpack:///./src/views/doc/Doc.vue?a094"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","staticClass","_l","item","key","id","class","active","on","$event","url","_v","_s","staticStyle","getdoc","model","callback","$$v","version","doc","domProps","textareaTab","target","composing","textarea","click","zxtsshow","openlayer","staticRenderFns","undefined","aData","loading","versions","$layer","o","instances","document","getElementById","addEventListener","getactivedom","removeEventListener","methods","e","keyCode","preventDefault","CaretPos","selectionStart","slice","$nextTick","setSelectionRange","window","event","returnValue","eval","$message","error","scrollIntoView","i","getElementsByTagName","length","Data","parentNode","innerText","split","tagName","push","parseInt","doms","dom","find","Math","abs","scrollTop","element","offsetTop","children","getElementsByClassName","component"],"mappings":"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","file":"js/chunk-786de6f7.c311a374.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"id\":\"doc\"}},[_c('div',{staticClass:\"menu\"},_vm._l((_vm.aData),function(item){return _c('div',{key:item.id,class:[item.class, item.id === _vm.active ? 'active' : ''],on:{\"click\":function($event){return _vm.url(item.id)}}},[_c('a',{attrs:{\"href\":\"javascript:void(0);\"}},[_vm._v(_vm._s(item.name))])])}),0),_c('div',{staticClass:\"concent\",attrs:{\"id\":\"concent\"}},[_c('div',{staticStyle:{\"text-align\":\"right\"}},[_c('el-select',{staticStyle:{\"width\":\"100px\",\"text-align\":\"left\"},attrs:{\"popper-append-to-body\":false,\"placeholder\":\"请选择\"},on:{\"change\":_vm.getdoc},model:{value:(_vm.version),callback:function ($$v) {_vm.version=$$v},expression:\"version\"}},_vm._l((_vm.versions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('mavon-editor',{attrs:{\"subfield\":false,\"defaultOpen\":\"preview\",\"editable\":false,\"toolbarsFlag\":false,\"scrollStyle\":true},model:{value:(_vm.doc),callback:function ($$v) {_vm.doc=$$v},expression:\"doc\"}})],1),_c('div',{staticStyle:{\"display\":\"none\",\"overflow\":\"hidden\"},attrs:{\"id\":\"test\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textarea),expression:\"textarea\"}],attrs:{\"id\":\"textarea\",\"contenteditable\":\"true\"},domProps:{\"value\":(_vm.textarea)},on:{\"keydown\":_vm.textareaTab,\"input\":function($event){if($event.target.composing){ return; }_vm.textarea=$event.target.value}}}),_c('el-button',{staticStyle:{\"position\":\"absolute\",\"bottom\":\"10px\",\"right\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.click}},[_vm._v(\"立即运行\")])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.zxtsshow),expression:\"!zxtsshow\"}],attrs:{\"id\":\"zxtsbtn\"},on:{\"click\":_vm.openlayer}},[_vm._v(\"在线调试\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"doc\" v-loading=\"loading\">\r\n    <div class=\"menu\">\r\n      <div v-for=\"item in aData\" :key=\"item.id\" @click=\"url(item.id)\" :class=\"[item.class, item.id === active ? 'active' : '']\">\r\n        <a href=\"javascript:void(0);\">{{ item.name }}</a>\r\n      </div>\r\n    </div>\r\n    <div class=\"concent\" id=\"concent\">\r\n      <div style=\"text-align: right\">\r\n        <el-select :popper-append-to-body=\"false\" v-model=\"version\" placeholder=\"请选择\" @change=\"getdoc\" style=\"width: 100px;text-align:left\">\r\n          <el-option v-for=\"item in versions\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n        </el-select>\r\n      </div>\r\n      <mavon-editor v-model=\"doc\" :subfield=\"false\" defaultOpen=\"preview\" :editable=\"false\" :toolbarsFlag=\"false\" :scrollStyle=\"true\" />\r\n    </div>\r\n    <div id=\"test\" style=\"display: none;overflow: hidden;\">\r\n      <textarea  id=\"textarea\" @keydown=\"textareaTab\" v-model=\"textarea\" contenteditable=\"true\"></textarea>\r\n      <el-button type='primary' style=\"position: absolute; bottom: 10px; right: 10px\" @click=\"click\">立即运行</el-button>\r\n    </div>\r\n    <div v-show='!zxtsshow' id=\"zxtsbtn\" @click=\"openlayer\">在线调试</div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"Doc\",\r\n  data() {\r\n    return {\r\n      doc: undefined,\r\n      aData: [],\r\n      active: undefined,\r\n      loading: true,\r\n      versions: [],\r\n      version: this.$layer.version,\r\n      zxtsshow:false,\r\n      textarea: `{\r\n  title:'在线调试',\r\n  content:'配置各种参数，试试效果'\r\n}`,\r\n    };\r\n  },\r\ncreated() {\r\n    const versions=[...this.$layer.versions].reverse();\r\n    this.versions=versions;\r\n    this.$layer.o.instances=[]\r\n    this.getdoc();\r\n  },\r\n  mounted() {\r\n    this.openlayer()\r\n    document.getElementById(\"concent\").addEventListener(\"scroll\", this.getactivedom);\r\n  },\r\n  beforeDestroy() {\r\n    if(document.getElementById(\"concent\")){\r\n      document.getElementById(\"concent\").removeEventListener(\"scroll\", this.getactivedom);\r\n    }\r\n    // document.getElementById(\"concent\")?.removeEventListener(\"scroll\", this.getactivedom);\r\n  },\r\n\r\n  methods: {\r\n    textareaTab(e) {\r\n      if (e.keyCode === 9) {\r\n        if (e && e.preventDefault) {\r\n          var CaretPos = document.getElementById(\"textarea\").selectionStart; // 创建选定区域\r\n          this.textarea = this.textarea.slice(0, CaretPos) + \"  \" + this.textarea.slice(CaretPos);\r\n          this.$nextTick(() => {\r\n            document.getElementById(\"textarea\").setSelectionRange(CaretPos + 2, CaretPos + 2);\r\n          });\r\n          e.preventDefault();\r\n        } else {\r\n          window.event.returnValue = false;\r\n        }\r\n      }\r\n    },\r\n    click() {\r\n      try {\r\n        window.eval(`Vue.prototype.$layer(${this.textarea})`);\r\n      } catch (error) {\r\n        this.$message.error(\"您的代码输入错误!\" + error);\r\n      }\r\n    },\r\n    openlayer(){\r\n        this.$layer({\r\n      title: \"在线调试\",\r\n      settop: true,\r\n      skin:'win7',\r\n      offset: [document.documentElement.scrollHeight-240,document.getElementById('concent').getBoundingClientRect().x+document.getElementById('concent').clientWidth-325],\r\n      content: document.getElementById(\"test\"),\r\n      resizing: (e,w,h) => {\r\n        document.getElementById(\"textarea\").style.height =(h-42)+'px'\r\n      },\r\n      success:()=>{\r\n          this.zxtsshow=true\r\n      },\r\n      end:()=>{\r\n        this.zxtsshow=false\r\n      }\r\n    });\r\n    },\r\n    url(url) {\r\n      document.getElementById(url).scrollIntoView(true);\r\n      this.active = url;\r\n    },\r\n    listA() {\r\n      const aData = [];\r\n      for (let i = 0; i < document.getElementsByTagName(\"a\").length; i++) {\r\n        if (document.getElementsByTagName(\"a\")[i].id !== \"\") {\r\n          let Data = {\r\n            id: document.getElementsByTagName(\"a\")[i].id, // 获取a标签的id\r\n            name: document.getElementsByTagName(\"a\")[i].parentNode.innerText.split(\"-\")[0],\r\n            class: document.getElementsByTagName(\"a\")[i].parentNode.tagName,\r\n          };\r\n          aData.push(Data);\r\n        }\r\n      }\r\n      this.aData = aData.slice(0, parseInt(aData.length / 2));\r\n      this.active = this.aData[0].id;\r\n    },\r\n    getdoc() {\r\n      this.loading = true;\r\n      axios\r\n        .get(`https://unpkg.com/layer-vue@${this.version}/README.md`)\r\n        .then((res) => {\r\n          this.doc = res.data;\r\n          console.log(res);\r\n          \r\n          this.$nextTick(() => {\r\n            this.listA();\r\n            this.loading = false;\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          this.loading = false;\r\n          console.error(err);\r\n          this.$message.error(\"文档错误，加载失败！\");\r\n        });\r\n    },\r\n    getactivedom() {\r\n      let doms = [\r\n        ...document.getElementById(\"concent\").getElementsByTagName(\"h1\"),\r\n        ...document.getElementById(\"concent\").getElementsByTagName(\"h2\"),\r\n        ...document.getElementById(\"concent\").getElementsByTagName(\"h3\"),\r\n        ...document.getElementById(\"concent\").getElementsByTagName(\"h4\"),\r\n        ...document.getElementById(\"concent\").getElementsByTagName(\"h5\"),\r\n      ];\r\n      let dom = doms.find((element) => {\r\n        return Math.abs(document.getElementById(\"concent\").scrollTop - element.offsetTop) < 120;\r\n      });\r\n      if (dom !== undefined) {\r\n        this.active = dom.children[0].id;\r\n        const active = document.getElementsByClassName(\"active\")[0];\r\n        active.scrollIntoView(true);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n#doc {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  .concent {\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    width: 900px;\r\n    padding: 20px;\r\n    position: relative;\r\n    z-index: 0;\r\n    h2 {\r\n      padding-top: 20px;\r\n      padding-bottom: 20px;\r\n    }\r\n    h3 {\r\n      padding-top: 10px;\r\n      padding-bottom: 10px;\r\n    }\r\n  }\r\n  .menu {\r\n    overflow: auto;\r\n    width: 200px;\r\n    height: 100%;\r\n    div {\r\n      padding: 5px 5px;\r\n      user-select: none;\r\n      font-size: 18px;\r\n      line-height: 20px;\r\n      height: 20px;\r\n      line-height: 20px;\r\n      &.H2 {\r\n        padding-left: 10px;\r\n        font-size: 16px;\r\n        a {\r\n          color: rgb(0, 0, 0);\r\n        }\r\n      }\r\n      &.H3 {\r\n        padding-left: 20px;\r\n        font-size: 14px;\r\n      }\r\n      &.H4 {\r\n        padding-left: 30px;\r\n        font-size: 14px;\r\n      }\r\n      &.H5 {\r\n        font-size: 12px;\r\n        padding-left: 40px;\r\n      }\r\n      &.active,&:hover {\r\n        a {\r\n          color: #409eff;\r\n        }\r\n        background: #0000000d;\r\n        border-radius: 5px;\r\n      }\r\n    }\r\n    a {\r\n      color: #444;\r\n    }\r\n  }\r\n  #zxtsbtn{\r\n    position: fixed;\r\n    z-index: 1;\r\n    width: 20px;\r\n    right: 0px;\r\n    // right: calc(50% - 550px);\r\n    top: 40%;\r\n    border: 1px solid rgb(202, 202, 202);\r\n    color: rgb(90, 90, 90);\r\n    font-size: 12px;\r\n    height: 100px;\r\n    line-height: 25px;\r\n    user-select: none;\r\n    border-right: 0;\r\n    cursor: pointer;\r\n    border-radius: 5px 0  0  5px;\r\n    text-align: center;\r\n    &:hover{\r\n      background: #409eff;\r\n      color: white;\r\n    }\r\n  }\r\n}\r\n#test{\r\n#textarea {\r\n  font-family: Courier New;\r\n  background: #444;\r\n  font-size: 12px;\r\n  color: white;\r\n  height: 150px;\r\n  width: 100%;\r\n  resize: none;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n}\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Doc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Doc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Doc.vue?vue&type=template&id=b3debdd0&\"\nimport script from \"./Doc.vue?vue&type=script&lang=js&\"\nexport * from \"./Doc.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Doc.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Doc.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}